{% from "base/util.j2" import fprint %}
{% extends "base/base.j2" %}
{% block main %}

{% for func in functions %}
packed_call_t *pack_{{ func.name }}({{ func.name }}_PACKED *_dst{% if func.args %}, {{ func.args|args }}{% endif %}) {
    if (_dst == NULL) _dst = malloc(sizeof({{ func.name }}_PACKED));
    _dst->index = {{ func.name }}_INDEX;
    {% for arg in func.args %}
    _dst->args.{{ arg.name }} = ({{ arg.type|unconst }}){{ arg.name }};
    {% endfor %}
    return (packed_call_t *)_dst;
}
{% endfor %}

{% endblock %}
